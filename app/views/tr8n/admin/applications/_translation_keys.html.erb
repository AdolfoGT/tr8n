<%= will_filter_table_tag(@results, :columns => [
  [:checkbox, :keys],
  [:id, lambda{|key|
    link_to(key.id, :controller => "/tr8n/admin/translation_key", :action => :view, :key_id => key.id) 
  }],
  [:label, lambda{|key|
    html = key.label
    html << '<div style="color:grey; font-size:10px; padding-top:3px;">'
    html << key.description.to_s  
    html << '</div>'  
  }],
  :locale,
  [:admin, lambda{|key| key.admin}, 'padding:5px;text-align:right;'],
  [:level, lambda{|key| key.level}, 'padding:5px;text-align:right;'], 
  [:translation_count, lambda{|key| link_to(key.translation_count || 0, :controller => "/tr8n/admin/translation_key", :action => :view, :key_id => key.id, :mode => :translations)}, 'padding:5px;text-align:right;'],
  [:created_at, lambda{|key| key.created_at}, 'padding:5px;text-align:right;'],
  [:actions, lambda{|key|
    html = []
    html << link_to_function("Update", "tr8nLightbox.show('/tr8n/admin/translation_key/lb_update?key_id=#{key.id}', {height:450})")
    html << link_to("Delete", {:controller => "/tr8n/admin/translation_key", :action => :delete, :key_id => key.id}, {:confirm => "Are you sure you want to delete this key?"})
    html.join(' | ')
  }, 'padding:5px;text-align:right;white-space:nowrap;']
]) %>

<%= will_filter_actions_bar_tag(@results, [
  ['Delete Selected Translation Keys', 'deleteSelectedKeys()'] 
]) %>

<script>
  function deleteSelectedKeys() {
    if (!confirm('Are you sure you want to delete all selected keys?'))
       return;
    Tr8n.element('keys_form').action = "/tr8n/admin/translation_key/delete";
    Tr8n.element('keys_form').submit();
  }
</script>