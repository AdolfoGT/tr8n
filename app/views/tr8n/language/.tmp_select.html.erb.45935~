<div class="head">
  <div class="action">
    <%=link_to_function(image_tag("/tr8n/images/close.gif", :style => "border:0px; padding-top:3px;", :alt=>trl("Close")), "tr8nLanguageSelector.hide()")%>
  </div>
  <div style="padding-top:3px"><%=trl("Choose a Language")%></div>
</div>

<div id="language_lists" style="margin-top:2px;">    
  <%=render(:partial => "lists") %>
</div>

<div style="margin-top:5px;padding-bottom:5px;">
  <%=tr8n_help_icon_tag %>
  <%=trl("Click this icon to view [link: translation help] in a new window.", "", :link => lambda{|txt| link_to(txt, {:controller => "tr8n/help", :action => :index}, :target => "new")})%>
</div>

<% unless tr8n_current_user_is_guest? %>
  <div id="translator_tools_trigger" class="foot" style="display:none; padding-bottom:10px;">
    <%= link_to_function(trl("Tools for Translators"), "$('translation_tools').toggle();", :style => "display:block;font-size:11px;margin:5px 0px;") %>
  
    <div id="translation_tools" style="display:none;">
      <% unless tr8n_current_language.default? %> 
        <% if @translator_tools_allowed %> 
          <div style="padding-top:5px; ">
            <% if @inline_translations_enabled %>
              <%=link_to_function(trl("Disable inline translations"), "tr8nLanguageSelector.disableInlineTranslations();")%><br>
            <% else %>
              <%=link_to_function(trl("Enable inline translations"), "tr8nLanguageSelector.enableInlineTranslations();")%><br>
            <% end %>
          
            <span style="color: grey; font-size: 10px;"><%=trl("Use right-mouse-click or ctr+click to translate the site.")%></span>
          </div>
    
	        <div style="padding-top:5px;">
	          <%=link_to_function(trl("View translations"), "tr8nLanguageSelector.openTranslations()")%><br>
	    
	          <span style="color: grey; font-size: 10px;"><%=trl("Search for translations by other users, vote on translations or add your own translations.")%></span>
	        </div>
	        
	        <script>
	          $("translator_tools_trigger").show();
	        </script>
        <% end %>
      <% end %>
    
      <% if tr8n_current_user_is_admin? or (tr8n_current_user_is_translator? and tr8n_current_translator.manager?) %>
        <div style="padding-top:5px;">
          <%=link_to_function(trl("Manage language"), "tr8nLanguageSelector.openLanguage()")%><br>
    
          <span style="color: grey; font-size: 10px;"><%=trl("Change language native name and define language rules.")%></span>
        </div>
      <% end %>
      
      <% if tr8n_current_user_is_admin? %>
        <div style="padding-top:5px;">
          <%=link_to(trl("Configure translations engine"), "/tr8n/admin/language")%><br>
    
          <span style="color: grey; font-size: 10px;"><%=trl("For site administrators only")%></span>
        </div>
      <% end %> 
    </div>
  </div>
<% end %>

<% form_tag({:controller => :language, :action => :switch}, :id => "language_selector_form", :style=>"padding:0px;margin:0px;") do %>
    <%=hidden_field_tag(:source_url, request.env['HTTP_REFERER'])%>
    <%=hidden_field_tag(:locale, tr8n_current_language.locale, :id => "language_selector_locale")%>
    <%=hidden_field_tag(:language_action, "switch_language", :id => "language_selector_action")%>
<% end %>