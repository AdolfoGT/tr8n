<% if mode == :list %>
  <%= render :partial => "/tr8n/common/paginator", :locals => {:objects => translations, :subject => 'translation'} %>
<% end %>	

<table style="width:100%;" cellpadding="5px" cellspacing="3px">
  <tr style="border-bottom:1px solid #ccc;">
    <td class="topic_header" style="width:200px;"><%=trl("Translator")%></td>
    <td class="topic_header" style="width:25px;"><%=trl("Rank")%></td>
    <td class="topic_header" style="width:80px;text-align:center"><%=trl("Your Vote")%></td>
    <td class="topic_header" style=""><%=trl("Translation")%></td>
    <td class="topic_header" style="width:50px;">&nbsp;</td>
  </tr>  

  <% translations.each do |trn| %>
    <% style = "border-bottom:1px dotted #ccc;" unless translations.last == trn %>
    <tr style="<%=style%>" id="translation_row_<%=trn.id%>">
			 <%= render :partial => "/tr8n/translations/translation", :locals => {:language => language, :translation => trn, :mode => mode} %>
    </tr>
  <% end %>
</table>

<% if mode == :list %>
  <%= render :partial => "/tr8n/common/paginator", :locals => {:objects => translations, :subject => 'translation'} %>
<% end %>	

<% if [:edit, :view].include?(mode) %>
	<script>
	  function editTranslationRow(translation_id, section_key) {
	    $('tr8n_votes_for_' + translation_id).hide();
	    $('tr8n_spinner_for_' + translation_id).show();
	    location = "/tr8n/translations/view?translation_id=" + translation_id + "&section_key=" + section_key;
	  }
	  
	  function deleteTranslationRow(translation_id, section_key) {
	    if (!confirm("<%=trl('Are you sure you want to delete this translation?')%>")) {
	      return;
	    }
	    
	    $('tr8n_votes_for_' + translation_id).hide();
	    $('tr8n_spinner_for_' + translation_id).show();
	    location = "/tr8n/translations/delete?translation_id=" + translation_id + "&section_key=" + section_key;
	  }
	  
	  function updateTranslationRow(translation_id, mode) {
	    $('tr8n_votes_for_' + translation_id).hide();
	    $('tr8n_spinner_for_' + translation_id).show();
	    
	    new Ajax.Updater('translation_row_' + translation_id, '/tr8n/translations/update', {
	      parameters: {translation_id:translation_id, mode:mode},
	      evalScripts: true,
	      method: 'get'
	    });
	  }
	  
	  function submitTranslationRow(translation_id) {
	    $('tr8n_votes_for_' + translation_id).hide();
	    $('tr8n_spinner_for_' + translation_id).show();
	    
	    new Ajax.Updater('translation_row_' + translation_id, '/tr8n/translations/update', {
	      parameters: {translation_id:translation_id, label:$("translation_row_value_" + translation_id).value},
	      evalScripts: true,
	      method: 'post'
	    });
	  }
	</script>
<% end %>